<html>
<script src="//ajax.googleapis.com/ajax/libs/jquery/1.11.0/jquery.min.js"></script>
<head><title><%= title %></title>
<style type="text/css">
     canvas { border: 1px solid black; }
</style>
</head>
<body>
<canvas id="schedule" width="700" height = "480"></canvas>
<script type="text/javascript">
function draw_block(day,starttime,endtime,color){
	var canvas = document.getElementById('schedule');
	var ctx = canvas.getContext('2d');
	ctx.fillStyle = color;
	ctx.fillRect(day*100,starttime*30,100,endtime*30);
}
alert("b");
draw_block(0,4,6,"#00FFFF");
alert("a");
var json = <%- JSON.stringify(commitments) %>;
alert("number of commitments = "+json.length);
canvas = document.getElementById('schedule');
ctx = canvas.getContext('2d');
for (var i=0; i< '<%- commitments.length %>'; i++){ 
alert(i);
var c = json[i];//<%- commitments %>[i];
alert("commitment #"+i+" is "+c);
alert("c.days = "+c.days);
alert("c.times = "+c.times);
var color = (Math.random()*0xFFFFFF<<0).toString(16); //random color
	ctx.fillStyle = color; 
	 for (var j=0;j<c.days.length;j++){ 
	 	alert("ctx = "+ctx);
		alert("1");
		//var canvas = document.getElementById('schedule');
		alert("2");
		//var ctx = canvas.getContext('2d');
		alert("3");
		ctx.fillRect( c.days[j] *100,c.times[0]*30,100,c.times[1]*30);
	}
}

</script>
</body>
</html>