<html>
<script src="//ajax.googleapis.com/ajax/libs/jquery/1.11.0/jquery.min.js"></script>
<head><title><%= title %></title>
<style type="text/css">
     canvas { border: 1px solid black; }
</style>
</head>
<body>
<canvas id="schedule" width="700" height = "480"></canvas>
<%
	width = 700;
	height = 480;
%>
<script type="text/javascript">
draw_block = function(day,starttime,endtime,color){
	var canvas = document.getElementById('schedule');
	var ctx = canvas.getContext('2d');
	ctx.fillStyle = color;
	ctx.fillRect(day*100,starttime*30,100,endtime*30);
}
draw_block(0,0.4,0.6,"#00FFFF");
</script>
<% for (var i=0; i< commitments.length; i++){ %>
<%	var c = commitments[i]; %>
<% console.log("#"+i); %>
<% console.log(c); %>
<% console.log("days = "+c.days); %>
<script>
 var color = (Math.random()*0xFFFFFF<<0).toString(16); //random color %>
</script>
<script> ctx.fillStyle = color; </script>
	<% for (var j=0;j<days.length;j++){ %>
		<% console.log("drawing block on day "+c.days[j]); %>
		<% console.log("from "+c.times[0]+" to "+c.times[1]);	%>
		<script>
		alert("1");
		var canvas = document.getElementById('schedule');
		alert("2");
		var ctx = canvas.getContext('2d');
		alert("3");
		ctx.fillStyle = color;
		ctx.fillRect( c.days[j] *100,c.times[0]*30,100,c.times[1]*30);
		</script>
	<% } %>
<% } %> 
</body>
</html>